# ğŸš€ GoldScalpingEA_ML v6.2 - 3% Drawdown Target

## ğŸ“Š Optimization Summary

### Goal
Reduce drawdown from **20.65%** to **3%** through ultra-conservative risk management.

---

## ğŸ”§ Key Changes

### 1. **Ultra-Low Risk Settings**
- **BaseLotSize**: 0.1 â†’ **0.05** (-50%)
- **RiskPercent**: 1.0% â†’ **0.3%** (-70%)
- **MaxPositions**: 2 â†’ **1** (only 1 position at a time)
- **MaxSpreadPips**: 30 â†’ **25** (tighter spread filter)

### 2. **Drawdown Protection (NEW)**
- **MaxDrawdownPercent**: **3.0%** (hard limit)
- **DailyLossLimitPercent**: **1.0%** (max loss per day)
- **Auto-detection**: Tracks initial balance automatically
- **Trading Block**: Automatically stops trading if limits exceeded

### 3. **Tighter Stop Losses** (Maintained from v6.1)
| Regime | SL Multiplier |
|--------|---------------|
| Ranging | 1.2x ATR |
| Trending | 1.5x ATR |
| Volatile | 1.8x ATR |
| Scalping | 0.8x ATR |
| Mean Rev | 1.2x ATR |
| Breakout | 1.5x ATR |

### 4. **Better Risk/Reward** (Maintained from v6.1)
| Regime | TP Multiplier | R:R Ratio |
|--------|---------------|-----------|
| Ranging | 2.5x ATR | 2.08:1 âœ… |
| Trending | 3.5x ATR | 2.33:1 âœ… |
| Volatile | 3.0x ATR | 1.67:1 âœ… |
| Scalping | 2.0x ATR | 2.50:1 âœ… |
| Mean Rev | 2.0x ATR | 1.67:1 âœ… |
| Breakout | 3.0x ATR | 2.00:1 âœ… |

### 5. **Faster Risk Management**
- **CutLossPips**: -18 pips (tighter early exit)
- **BreakevenPips**: 12 pips (faster breakeven)
- **Partial Close**: 50% at +25 pips (lock in profits)
- **Trailing Start**: 12-25 pips (faster trailing)

---

## ğŸ›¡ï¸ Protection Mechanisms

### Drawdown Protection
```mql5
- Tracks initial balance automatically
- Calculates current drawdown % in real-time
- Blocks all trading if DD >= 3%
- Displays current DD on chart
```

### Daily Loss Limit
```mql5
- Resets daily at midnight
- Tracks daily loss % from start of day
- Blocks trading if daily loss >= 1%
- Prevents compounding bad days
```

### Position Limits
```mql5
- Maximum 1 position at a time
- Prevents over-exposure
- Reduces correlation risk
```

---

## ğŸ“ˆ Expected Results

### Drawdown
- **Before**: 20.65%
- **Target**: **3.0%** (85% reduction)

### Risk Per Trade
- **Before**: 1.0% per trade
- **Now**: **0.3% per trade** (70% reduction)

### Position Size
- **Before**: 0.1 lots (or calculated by risk)
- **Now**: **0.05 lots** (50% reduction)

### Daily Risk
- **Before**: Unlimited
- **Now**: **1.0% max per day**

---

## âš™ï¸ Configuration

### Recommended Settings for 3% DD
```
BaseLotSize = 0.05
RiskPercent = 0.3
MaxPositions = 1
MaxDrawdownPercent = 3.0
DailyLossLimitPercent = 1.0
EnableDrawdownProtection = true
EnableDailyLossLimit = true
```

### For More Aggressive (5% DD)
```
BaseLotSize = 0.08
RiskPercent = 0.5
MaxPositions = 1
MaxDrawdownPercent = 5.0
DailyLossLimitPercent = 2.0
```

---

## ğŸ¯ Usage Notes

1. **Initial Balance**: Set manually if needed, or leave at 0 for auto-detection
2. **Drawdown Tracking**: Uses the lower of Balance or Equity
3. **Daily Reset**: Resets at midnight (server time)
4. **Trading Block**: When limits are hit, EA displays warning but doesn't close positions
5. **Manual Override**: Can disable protection if needed (not recommended)

---

## ğŸ“ Files Kept

- âœ… `GoldScalpingEA_ML.mq5` (v6.2)
- âœ… `models/` (ML regime detection)
- âœ… `src/` (ML regime training code)
- âœ… `train_regime.py` (ML regime trainer)
- âœ… `config.yaml` (ML regime config)
- âœ… `requirements.txt` (Python dependencies)
- âœ… `README.md` (Documentation)
- âœ… `testing/` (Testing folder)

---

## ğŸ—‘ï¸ Files Removed

- âŒ `GoldPricePrediction_Training.ipynb` (old ensemble training)
- âŒ `ensemble_config.json` (old ensemble config)
- âŒ `ensemble_results.png` (old results)
- âŒ `scaler_params.json` (old scaler)
- âŒ `ReportTester-100335521.xlsx` (backtest report)
- âŒ Analysis scripts (temporary files)

---

**Version**: 6.2  
**Date**: Optimized for 3% drawdown target  
**Focus**: Ultra-conservative risk management

